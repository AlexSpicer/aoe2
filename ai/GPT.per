(defrule
    (true)
=>
    (chat-to-all "Prepare yourself! I won't go easy on you.")
)

; ====================
; Economic Development
; ====================
(defrule
    (can-train villager)
    (population < 100)
=>
    (train villager)
)

(defrule
    (can-build farm)
    (food-amount < 500)
    (building-type-count farm < 30)
=>
    (build farm)
)

(defrule
    (building-type-count lumber-camp < 2)
    (wood-amount > 200)
=>
    (build lumber-camp)
)

(defrule
    (building-type-count mining-camp < 2)
    (stone-amount + gold-amount > 300)
=>
    (build mining-camp)
)

; ====================
; Military Production
; ====================
(defrule
    (building-type-count barracks < 1)
    (can-build barracks)
=>
    (build barracks)
)

(defrule
    (building-type-count archery-range < 1)
    (can-build archery-range)
=>
    (build archery-range)
)

(defrule
    (can-train archer)
    (population < 150)
    (wood-amount > 50)
    (gold-amount > 30)
=>
    (train archer)
)

(defrule
    (can-train militia)
    (population < 150)
    (food-amount > 60)
    (gold-amount > 20)
=>
    (train militia)
)

; ====================
; Aggression and Attacks
; ====================
(defrule
    (population >= 50)
    (enemy-building-exists)
=>
    (chat-to-all "I see you, and Iâ€™m coming for you!")
    (attack-now)
)

(defrule
    (up-close-to-enemy 10)
=>
    (attack-now)
)

(defrule
    (enemy-type-count villager >= 1)
=>
    (attack-now)
)

; ====================
; Defense
; ====================
(defrule
    (enemy-sighted)
    (up-close-to-enemy 5)
=>
    (train militia)
    (attack-now)
)

(defrule
    (can-build tower)
    (population > 40)
    (building-type-count tower < 2)
=>
    (build tower)
)

; ====================
; Game-End Taunt
; ====================
(defrule
    (enemy-dead)
=>
    (chat-to-all "You fought well, but I am victorious!")
)
